<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5" />
    <meta name="msapplication-TileColor" content="#da532c" />
    <meta name="theme-color" content="#ffffff" />
    <!-- Primary Meta Tags -->
    <title>SwiftCart — The fastest e-commerce store in SA</title>
    <meta name="title" content="SwiftCart — The fastest e-commerce store in SA" />
    <meta
      name="description"
      content="Discover SwiftCart, South Africa's fastest e-commerce store, offering lightning-fast shopping experiences. Shop now for top brands and exclusive deals, with swift delivery nationwide. Experience seamless browsing, secure transactions, and exceptional customer service at SwiftCart today"
    />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://metatags.io/" />
    <meta
      property="og:title"
      content="SwiftCart — The fastest e-commerce store in SA"
    />
    <meta
      property="og:description"
      content="Discover SwiftCart, South Africa's fastest e-commerce store, offering lightning-fast shopping experiences. Shop now for top brands and exclusive deals, with swift delivery nationwide. Experience seamless browsing, secure transactions, and exceptional customer service at SwiftCart today"
    />
    <meta
      property="og:image"
      content="https://metatags.io/images/meta-tags.png"
    />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://metatags.io/" />
    <meta
      property="twitter:title"
      content="SwiftCart — The fastest e-commerce store in SA"
    />
    <meta
      property="twitter:description"
      content="Discover SwiftCart, South Africa's fastest e-commerce store, offering lightning-fast shopping experiences. Shop now for top brands and exclusive deals, with swift delivery nationwide. Experience seamless browsing, secure transactions, and exceptional customer service at SwiftCart today"
    />
    <meta
      property="twitter:image"
      content="https://metatags.io/images/meta-tags.png"
    />

    <title>SwiftCart</title>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css"
    />
  </head>
  <body>
    <!-- HEADER -->
    <header class="sticky z-50 top-0" x-data="{ isNavbarOpen: false }">
      <nav class="bg-gray-500 border-gray-200">
        <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">
          <a href="/">
            <button class="flex items-center space-x-3 rtl:space-x-reverse">
              <img src="/Swiftcart/public/online-shop.png" class="h-8" alt="Flowbite Logo">
              <span class="self-center text-2xl font-semibold whitespace-nowrap text-white">
                SwiftCart
              </span>
            </button>
          </a>
          <button
            x-on:click="isNavbarOpen = !isNavbarOpen"
            type="button"
            class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-white rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200"
            aria-controls="navbar-default"
            aria-expanded="false"
          >
            <span class="sr-only">Open main menu</span>
            <svg
              class="w-5 h-5"
              aria-hidden="true"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 17 14"
            >
              <path
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M1 1h15M1 7h15M1 13h15"
              />
            </svg>
          </button>

          <div
            :class="{ 'hidden': !isNavbarOpen }"
            class="w-full md:block md:w-auto"
            id="navbar-dropdown"
          >
            <ul class="flex flex-col top-10 font-medium p-4 md:p-0 mt-4 border border-gray-100 rounded-lg bg-gray-500 md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0">
              <li>
                <a
                  href=""
                  class="block py-2 px-3 text-white rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0"
                >
                  Wishlist
                </a>
              </li>
              <li class="hidden lg:block md:block relative">
                <a href="">
                  <div class="t-0 absolute left-3 -top-4">
                    <p class="flex h-2 w-2 items-center justify-center rounded-full bg-red-500 p-3 text-xs text-white">
                      2
                    </p>
                  </div>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="file: h-6 w-6 stroke-white cursor-pointer"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"
                    />
                  </svg>
                </a>
              </li>
              <li>
                <a
                  href=""
                  class="lg:hidden md:hidden py-2 px-3 text-white rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0"
                >
                  Cart
                </a>
              </li>
              <li>
                <a
                  href="login"
                  class="block py-2 px-3 text-white rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0"
                >
                  Login
                </a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>
    <!-- END OF HEADER -->

    <!-- SORT, FILTER AND SEARCH -->
    <div class="flex flex-wrap justify-center gap-4 my-4" x-data="{
      sorting: 'default',
      filterItem: 'All categories',
      searchTerm: '',
      categories: [],
      products: [],
      loading: true,
      modalOpen: false,
      selectedProduct: null,
      async fetchCategories() {
        try {
          const response = await fetch('https://fakestoreapi.com/products/categories');
          const data = await response.json();
          this.categories = data;
        } catch (error) {
          console.error('Error fetching categories:', error);
        }
      },
      async fetchProducts() {
        this.loading = true;
        try {
          const response = await fetch('https://fakestoreapi.com/products');
          const data = await response.json();
          this.products = data.filter(product => 
            this.filterItem === 'All categories' || product.category === this.filterItem
          );
          this.sortProducts();
          this.loading = false;
        } catch (error) {
          console.error('Error fetching products:', error);
          this.loading = false;
        }
      },
      setSorting(value) {
        this.sorting = value;
        this.sortProducts();
      },
      sortProducts() {
        if (this.sorting === 'low') {
          this.products.sort((a, b) => a.price - b.price);
        } else if (this.sorting === 'high') {
          this.products.sort((a, b) => b.price - a.price);
        }
      },
      setFilterItem(category) {
        this.filterItem = category;
        this.fetchProducts();
        this.toggleDropdown();
      },
      searchProducts() {
        this.products = this.products.filter(product => 
          product.title.toLowerCase().includes(this.searchTerm.toLowerCase())
        );
      },
      handleSearch(event) {
        this.searchTerm = event.target.value;
        this.searchProducts();
      },
      toggleDropdown() {
        const dropDown = document.getElementById('dropdown');
        dropDown.classList.toggle('hidden');
      },
      async openModal(productId) {
        this.modalOpen = true;
        try {
          const response = await fetch(`https://fakestoreapi.com/products/${productId}`);
          if (!response.ok) throw new Error('Failed to fetch product details');
          this.selectedProduct = await response.json();
        } catch (error) {
          console.error(error);
          this.modalOpen = false;
          alert('Failed to load product details. Please try again.');
        }
      },
      closeModal() {
        this.modalOpen = false;
      },
      init() {
        this.fetchCategories();
        this.fetchProducts();
      }
    }" x-init="init()">
      <!-- Filter Dropdown -->
      <div class="flex items-center relative">
        <button @click="toggleDropdown" id="dropdown-button" class="flex-shrink-0 z-10 inline-flex items-center py-2.5 px-4 text-sm font-medium text-center text-gray-900 bg-gray-100 border border-gray-300 rounded-s-lg hover:bg-gray-200">
          <span x-text="filterItem"></span>
          <svg class="w-2.5 h-2.5 ml-2.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4"/>
          </svg>
        </button>
        <div id="dropdown" class="z-10 absolute top-full hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-44">
          <ul class="py-2 text-sm text-gray-700">
            <li @click="setFilterItem('All categories')" class="cursor-pointer px-4 py-2 hover:bg-gray-100">All categories</li>
            <template x-for="category in categories" :key="category">
              <li @click="setFilterItem(category)" class="cursor-pointer px-4 py-2 hover:bg-gray-100" x-text="category"></li>
            </template>
          </ul>
        </div>
      </div>

      <!-- Search Bar -->
      <div class="relative w-full max-w-xs">
        <input type="search" id="search-dropdown" name="searchInput" class="p-2.5 w-full z-20 text-sm text-gray-900 bg-gray-50 rounded-e-lg border-s-gray-50 border-s-2 border border-gray-300 focus:ring-blue-500 focus:border-blue-500" placeholder="Search products..." x-model="searchTerm" @input="handleSearch">
        <button type="submit" class="absolute top-0 right-0 p-2.5 text-sm font-medium h-full text-white bg-blue-700 rounded-e-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300">
          <svg class="w-4 h-4" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"/>
          </svg>
          <span class="sr-only">Search</span>
        </button>
      </div>

      <!-- Sort Button -->
      <div class="flex items-center">
        <label for="sort" class="w-20 my-auto font-semibold">Sort by: </label>
        <select @change="setSorting($event.target.value)" x-model="sorting" id="sort" class="p-2.5 w-full max-w-[21rem] text-sm text-gray-900 bg-gray-50 rounded-e-lg border-s-gray-50 border-s-2 border border-gray-300 focus:ring-blue-500 focus:border-blue-500">
          <option value="default">Default</option>
          <option value="low">Price: Low to High</option>
          <option value="high">Price: High to Low</option>
        </select>
      </div>
    </div>
    <!-- END OF SORT, FILTER AND SEARCH -->

    <!-- API FETCH AND CARD DISPLAY -->
    <main class="container mx-auto px-4 py-5" x-data="{
      products: [],
      loading: true,
      modalOpen: false,
      selectedProduct: null,
      fetchProducts() {
        this.loading = true;
        fetch('https://fakestoreapi.com/products')
          .then(response => response.json())
          .then(data => {
            this.products = data;
            this.sortProducts(); // Sort products initially
            this.loading = false;
          })
          .catch(error => {
            console.error('Error fetching products:', error);
            this.loading = false;
          });
      },
      sortProducts() {
        if (this.sorting === 'low') {
          this.products.sort((a, b) => a.price - b.price);
        } else if (this.sorting === 'high') {
          this.products.sort((a, b) => b.price - a.price);
        }
      },
      async openModal(productId) {
        this.modalOpen = true;
        try {
          const response = await fetch(`https://fakestoreapi.com/products/${productId}`);
          if (!response.ok) throw new Error('Failed to fetch product details');
          this.selectedProduct = await response.json();
        } catch (error) {
          console.error(error);
          this.modalOpen = false;
          alert('Failed to load product details. Please try again.');
        }
      },
      closeModal() {
        this.modalOpen = false;
      },
      init() {
        this.fetchProducts();
      }
    }" x-init="init()">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
        <!-- Loading State -->
        <template x-if="loading">
          <template x-for="n in 20">
            <div role="status" class="bg-white max-w-sm p-4 border border-gray-200 rounded shadow animate-pulse md:p-6 dark:border-gray-700">
              <div class="flex items-center justify-center h-48 mb-4 bg-gray-300 rounded dark:bg-gray-700">
                <svg class="w-10 h-10 text-gray-200 dark:text-gray-600" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 20">
                  <path d="M14.066 0H7v5a2 2 0 0 1-2 2H0v11a1.97 1.97 0 0 0 1.934 2h12.132A1.97 1.97 0 0 0 16 18V2a1.97 1.97 0 0 0-1.934-2ZM10.5 6a1.5 1.5 0 1 1 0 2.999A1.5 1.5 0 0 1 10.5 6Zm2.221 10.515a1 1 0 0 1-.858.485h-8a1 1 0 0 1-.9-1.43L5.6 10.039a.978.978 0 0 1 .936-.57 1 1 0 0 1 .9.632l1.181 2.981.541-1a.945.945 0 0 1 .883-.522 1 1 0 0 1 .879.529l1.832 3.438a1 1 0 0 1-.031.988Z"/>
                  <path d="M5 5V.13a2.96 2.96 0 0 0-1.293.749L.879 3.707A2.98 2.98 0 0 0 .13 5H5Z"/>
                </svg>
              </div>
              <div class="h-2 bg-gray-200 rounded-full dark:bg-gray-700 mb-2.5"></div>
              <div class="h-2.5 bg-gray-200 rounded-full dark:bg-gray-700 w-48 mb-4"></div>
              <div class="h-2.5 bg-gray-200 rounded-full dark:bg-gray-700 w-10 mb-4"></div>
              <span class="sr-only">Loading...</span>
            </div>
          </template>
        </template>

        <!-- Product Cards -->
        <template x-for="product in products" :key="product.id">
          <div class="hover:-translate-y-1 hover:scale-105 duration-300 cursor-pointer max-w-150 bg-white border border-slate-200 shadow shadow-slate-950/5 rounded-2xl overflow-hidden" @click="openModal(product.id)">
            <img :src="product.image" alt="Product Image" class="object-contain w-full h-48 mt-3" />
            <div class="p-4">
              <h2 class="text-lg font-semibold" x-text="product.title"></h2>
              <div class="flex items-left -ml-2 mb-2">
                <template x-for="i in 5">
                  <svg class="w-4 h-4" :class="i <= Math.round(product.rating.rate) ? 'text-yellow-400' : 'text-gray-300'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                  </svg>
                </template>
              </div>
              <p class="text-gray-600" x-text="'$' + product.price"></p>
              <div class="inline-flex items-center rounded-md bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 ring-1 ring-inset ring-blue-700/10" x-text="product.category"></div>
              <button>
                <svg class="me-1.5 h-5 w-5 hover:fill-red-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" transform="scale(1.6)">
                  <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12.01 6.001C6.5 1 1 8 5.782 13.001L12.011 20l6.23-7C23 8 17.5 1 12.01 6.002Z" />
                </svg>
              </button>
              <button class="mt-4 bg-blue-400 text-white px-4 py-2 rounded hover:bg-blue-600">Add to Cart</button>
            </div>
          </div>
        </template>
      </div>

      <!-- Modal -->
      <div x-show="modalOpen" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in duration-200" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0">
        <div @click.away="closeModal()" class="bg-white rounded-lg shadow-md relative w-full max-w-4xl max-h-[90vh] overflow-y-auto" @click.stop>
          <button @click="closeModal()" class="absolute top-4 right-4 text-gray-600 hover:text-gray-800 z-10">
            <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
          <div class="p-6 sm:p-8">
            <div class="flex flex-col md:flex-row">
              <div class="md:w-1/2 mb-4 md:mb-0 md:mr-4">
                <img :src="selectedProduct.image" :alt="selectedProduct.title" class="w-full h-64 object-contain">
              </div>
              <div class="md:w-1/2">
                <h2 class="text-2xl sm:text-3xl md:text-4xl font-semibold mb-3" x-text="selectedProduct.title"></h2>
                <div class="flex items-center mb-2">
                  <span class="text-yellow-400 mr-1">★</span>
                  <span x-text="`${selectedProduct.rating?.rate} (${selectedProduct.rating?.count} reviews)`"></span>
                </div>
                <p class="text-gray-500 px-2 py-1 bg-indigo-100 rounded-md text-xs font-medium mb-2 inline-block" x-text="selectedProduct.category"></p>
                <p class="text-lg font-semibold mb-4" x-text="'$' + selectedProduct.price"></p>
                <p class="text-gray-600" x-text="selectedProduct.description"></p>
                <div class="mt-4">
                  <button class="bg-blue-400 text-white px-4 py-2 rounded hover:bg-blue-600">Add to Cart</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <!-- END OF API FETCH AND DISPLAY-->

    <div id="app"></div>
    <script>
      
    </script>
  </body>
</html>
